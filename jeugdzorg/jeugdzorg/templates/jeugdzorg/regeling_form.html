{% extends 'base.html' %}
{% load static %}
{% block main %}
<div class="container">
    <form action="" method="post">
        {% csrf_token %}
        <fieldset>
            <legend>Regeling</legend>
            <h2>Meta info</h2>
            <p class="row">
                <label>
                    <strong>Titel</strong>
                    {{ form.titel }}
                </label>
            </p>
            <p class="row">
                <label>
                    <strong>Samenvatting</strong>
                    {{ form.samenvatting }}
                </label>
            </p>
            <p class="row">
                <label>
                    <strong>Aanbieder</strong>
                    {{ form.bron }}
                </label>
            </p>
            <p class="row">
                <label>
                    <strong>Bron URL</strong>
                    {{ form.bron_url }}
                </label>
            </p>
            <p class="row group">
                <label>
                    <strong>Startdatum</strong>
                    {{ form.startdatum }}
                </label>
                <label>
                    <strong>Einddatum</strong>
                    {{ form.einddatum }}
                </label>
            </p>
            {% if contacten %}
            <div class="row">
                <strong>Contacten</strong>
                <ul class="regeling-doelen">
                    {% for contact in contacten %}
                    <li>
                        <input id="regeling-contact-input-{{ contact.id }}" name="regeling-contact-input-{{ contact.id }}" type="checkbox" {% if contact.id in contacten_added %}checked="checked"{% endif %} value="true">
                        <input name="regeling-contact-input-{{ contact.id }}" type="hidden" value="false">
                        <input name="regeling-contact-input-{{ contact.id }}" type="text" value="">
                        <label for="regeling-contact-input-{{ contact.id }}">{{ contact }}</label> <a href="#regeling-contact-{{ contact.id }}" data-handler="toggle"><abbr title="info">?</abbr></a>
                        {{ contact.volgorde }}


                    </li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
            {% if doelen %}
            <div class="row">
                <strong>Doel</strong>
                <ul class="regeling-doelen">
                    {% for doel in doelen %}
                    <li>
                        <input id="regeling-doel-input-{{ doel.id }}" name="regeling-doel-input-{{ doel.id }}" type="checkbox" {% if doel.id in doelen_added %}checked="checked"{% endif %} value="true">
                        <input name="regeling-doel-input-{{ doel.id }}" type="hidden" value="false">
                        <label for="regeling-doel-input-{{ doel.id }}">{{ doel.titel }}</label> <a href="#regeling-doel-{{ doel.id }}" data-handler="toggle"><abbr title="info">?</abbr></a>
                        {% if doel.omschrijving %}
                            <label for="regeling-doel-input-{{ doel.id }}" id="regeling-doel-{{ doel.id }}" class="regeling-doel">
                                {{ doel.omschrijving }}
                            </label>
                        {% endif %}

                    </li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}

            <h2>Doelen generiek</h2>
            {{ dfs.management_form }}
            <ol class="form-list" data-decorator="list">
                {% for form in dfs.forms %}
                <li class=" formset_row">
                    <label>
                        <strong>Doel</strong>
                        {% for field in form.visible_fields %}
                            {% if forloop.first %}
                                {% for hidden in form.hidden_fields %}
                                    {{ hidden }}
                                {% endfor %}
                            {% endif %}
                            {{ field.errors.as_ul }}
                            {{ field }}
                        {% endfor %}
                    </label>
                </li>
                {% endfor %}
            </ol>

            <h2>Voorwaarden</h2>
            {{ voorwaarde.management_form }}
            <ol class="form-list" data-decorator="list">
                {% for form in voorwaarde.forms %}
                <li class=" formset_row">
                    <label>
                        <strong>Voorwaarde</strong>
                        {% for field in form.visible_fields %}
                            {% if forloop.first %}
                                {% for hidden in form.hidden_fields %}
                                    {{ hidden }}
                                {% endfor %}
                            {% endif %}
                            {{ field.errors.as_ul }}
                            {{ field }}
                        {% endfor %}
                    </label>
                </li>
                {% endfor %}
            </ol>



            <h2>crfs</h2>
            {{ crfs.management_form }}
            <ol class="form-list" data-decorator="list">
                {% for form in crfs.forms %}
                <li class=" formset_row">
                    <label>
                        <strong>Contact</strong>
                        {% for field in form.visible_fields %}
                            {% if forloop.first %}
                                {% for hidden in form.hidden_fields %}
                                    {{ hidden }}
                                {% endfor %}
                            {% endif %}
                            {{ field.errors.as_ul }}
                            {{ field }}
                        {% endfor %}
                    </label>
                </li>
                {% endfor %}
            </ol>
        </fieldset>
        <p class="buttons right">
            <button name="submit" type="submit" value="{% url 'regelingen' %}" class="button">Opslaan</button>
            <button name="submit" type="submit" class="button secondary">Opslaan en doorgaan</button>
            <a href="{% url 'regelingen' %}">Terug naar de lijst</a>
        </p>
    </form>
</div>

{% endblock %}