{% extends 'base.html' %}
{% load static %}
{% block main %}
<div class="container">
    <form action="" method="post">
        {% csrf_token %}
        <fieldset>
            <legend>Regeling</legend>
            <h2>Meta info</h2>
            <p class="row">
                <label>
                    <strong>Titel</strong>
                    {{ form.titel }}
                </label>
            </p>
            <p class="row">
                <label>
                    <strong>Samenvatting</strong>
                    {{ form.samenvatting }}
                </label>
            </p>
            <p class="row">
                <label>
                    <strong>Aanbieder</strong>
                    {{ form.bron }}
                </label>
            </p>
            <p class="row">
                <label>
                    <strong>Aaanvraag url</strong>
                    {{ form.aanvraag_url }}
                </label>
            </p>
            <p class="row">
                <label>
                    <strong>Bron URL</strong>
                    {{ form.bron_url }}
                </label>
            </p>
            <p class="row group">
                <label>
                    <strong>Startdatum</strong>
                    {{ form.startdatum }}
                </label>
                <label>
                    <strong>Einddatum</strong>
                    {{ form.einddatum }}
                </label>
            </p>
            
            <hr>
            
            <div class="regeling-set">

                <h2>Doelen</h2>
                {{ dfs.management_form }}
                <ol class="form-list" data-decorator="list">
                    {% for form in dfs.forms %}
                    <li>
                        <label>
                            <strong>Doel</strong>
                            {% for field in form.visible_fields %}
                                {% if forloop.first %}
                                    {% for hidden in form.hidden_fields %}
                                        {{ hidden }}
                                    {% endfor %}
                                {% endif %}
                                {{ field.errors.as_ul }}
                                {{ field }}
                            {% endfor %}
                        </label>
                    </li>
                    {% endfor %}
                </ol>
            </div>
            
            <hr>
            
            <div class="regeling-set">

                <h2>Voorwaarden</h2>
                {{ voorwaarde.management_form }}
                <ol class="form-list" data-decorator="list">
                    {% for form in voorwaarde.forms %}
                    <li>
                        <label>
                            <strong>Voorwaarde</strong>
                            {% for field in form.visible_fields %}
                                {% if forloop.first %}
                                    {% for hidden in form.hidden_fields %}
                                        {{ hidden }}
                                    {% endfor %}
                                {% endif %}
                                {{ field.errors.as_ul }}
                                {{ field }}
                            {% endfor %}
                        </label>
                    </li>
                    {% endfor %}
                </ol>
            </div>

            <hr>
            
            <div class="regeling-set">

                <h2>Contacten</h2>
                {{ crfs.management_form }}
                <ol class="form-list" data-decorator="list">
                    {% for form in crfs.forms %}
                    <li class="group">
                        {% for field in form.visible_fields %}
                            <label class="input-{{ field.label|slugify }}">
                                <strong>{{ field.label }}</strong>
                                {{ field }}
                            </label>
                            {% if forloop.first %}
                                {% for hidden in form.hidden_fields %}
                                    {{ hidden }}
                                {% endfor %}
                            {% endif %}
                            {{ field.errors.as_ul }}
                        {% endfor %}
                    </li>
                    {% endfor %}
                </ol>
                
            </div>
            
        </fieldset>
        <p class="buttons right">
            <button name="submit" type="submit" value="{% url 'regelingen' %}" class="button">Opslaan</button>
            <button name="submit" type="submit" class="button secondary">Opslaan en doorgaan</button>
            {% if object %}
            <a href="{% url 'verwijder_regeling' object.id %}" class="button secondary">Verwijderen</a>
            {% endif %}
            <a href="{% url 'regelingen' %}">Terug naar de lijst</a>
        </p>
    </form>
</div>

{% endblock %}